{
  "$id": "https://github.com/StreamlineData/catalog/blob/master/catalog-rest-service/src/main/resources/json/schema/type/common.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Common types",
  "description": "Common reusable types",
  "definitions": {
    "uuid": {
      "description": "Unique id used to identify an entity",
      "type": "string",
      "format": "uuid"
    },
    "schema": {
      "description": "URL for the schema of an entity",
      "type": "string",
      "format": "uri"
    },
    "email": {
      "description": "Email address of user or other entities",
      "type": "string",
      "javaType": "org.openmetadata.catalog.type.Email",
      "format": "email",
      "pattern": "^\\S+@\\S+\\.\\S+$",
      "minLength": 6,
      "maxLength": 127
    },
    "timestamp": {
      "$comment": "Timestamp type",
      "type": "string",
      "format": "utc-millisec"
    },
    "href": {
      "$comment": "Link to the resource",
      "type": "string",
      "format": "uri"
    },
    "timeInterval": {
      "$comment": "Time interval type",
      "type": "object",
      "javaType": "org.openmetadata.catalog.type.TimeInterval",
      "properties": {
        "start": {
          "description": "Start unixTimeMillis",
          "type": "integer"
        },
        "end": {
          "description": "End unixTimeMillis",
          "type": "integer"
        }
      }
    },
    "duration": {
      "description": "Duration in ISO 8601 format in UTC time. Example - 'P23DT23H'",
      "type": "string",
      "$comment" : "Jsonschema does not handle ISO 8601 duration yet and hence no format for this type"
    },
    "date": {
      "description": "Date in ISO 8601 format in UTC time. Example - '2018-11-13'",
      "type": "string",
      "format": "date"
    },
    "dateTime": {
      "description": "Date and time in ISO 8601 format. Example - '2018-11-13T20:20:39+00:00'",
      "type": "string",
      "format": "date-Time"
    },
    "schedule": {
      "type": "object",
      "properties": {
        "startDate" : {
          "description" : "Start date and time of the schedule",
          "$ref" : "#/definitions/dateTime"
        },
        "repeatFrequency" : {
          "description" : "Repeat frequency in ISO 8601 duration format",
          "$ref" : "#/definitions/duration"
        }
      }
    },
    "entityReference": {
      "$comment": "Entity reference that includes entity ID and entity type",
      "type": "object",
      "javaType": "org.openmetadata.catalog.type.EntityReference",
      "properties": {
        "id": {
          "description": "Unique identifier that identifies an entity instance",
          "$ref": "#/definitions/uuid"
        },
        "type": {
          "description": "Entity type/class name - Examples: database, table, metrics, redshift, mysql, bigquery, snowflake...",
          "type": "string"
        },
        "name": {
          "description": "Name of the entity instance",
          "type": "string"
        },
        "description": {
          "description": "Optional description of entity",
          "type": "string"
        },
        "href": {
          "description": "Link to the entity resource",
          "$ref": "#/definitions/href"
        }
      },
      "required": [
        "id",
        "type"
      ]
    },
    "entityReferenceList" : {
      "type": "array",
      "items" :{
        "$ref": "#/definitions/entityReference"
      },
      "default": null
    },
    "usageStats": {
      "$comment": "Type used to return usage statistics",
      "type": "object",
      "javaType": "org.openmetadata.catalog.type.UsageStats",
      "properties": {
        "count": {
          "Description": "Usage count of a data asset on the start date",
          "type": "integer",
          "minimum": 0
        },
        "percentileRank": {
          "Description": "Optional daily percentile rank data asset use when relevant",
          "type": "number",
          "minimum": 0,
          "maximum": 100
        }
      },
      "required": [
        "count"
      ],
      "additionalProperties": false
    },
    "usageDetails": {
      "$comment": "Type used to return usage details",
      "type": "object",
      "javaType": "org.openmetadata.catalog.type.UsageDetails",
      "properties": {
        "dailyStats": {
          "Description": "Daily usage stats of a data asset on the start date",
          "$ref": "#/definitions/usageStats"
        },
        "weeklyStats": {
          "Description": "Weekly (last 7 days) rolling usage stats of a data asset on the start date",
          "$ref": "#/definitions/usageStats"
        },
        "monthlyStats": {
          "Description": "Monthly (last 30 days) rolling usage stats of a data asset on the start date",
          "$ref": "#/definitions/usageStats"
        },
        "date": {
          "Description": "Date in UTC time",
          "$ref": "#/definitions/date"
        }
      },
      "required": [
        "dailyStats",
        "date"
      ]
    },
    "profile": {
      "$comment": "Profile of a user, team, or an organization",
      "type": "object",
      "javaType": "org.openmetadata.catalog.type.Profile",
      "properties": {
        "images": {
          "$ref": "#/definitions/imageList"
        }
      }
    },
    "imageList": {
      "$comment": "Links to list of images of varying resolutions/sizes",
      "type": "object",
      "javaType": "org.openmetadata.catalog.type.ImageList",
      "properties": {
        "image": {
          "type": "string",
          "format": "uri"
        },
        "image24": {
          "type": "string",
          "format": "uri"
        },
        "image32": {
          "type": "string",
          "format": "uri"
        },
        "image48": {
          "type": "string",
          "format": "uri"
        },
        "image72": {
          "type": "string",
          "format": "uri"
        },
        "image192": {
          "type": "string",
          "format": "uri"
        },
        "image512": {
          "type": "string",
          "format": "uri"
        }
      }
    },
    "tagLabel": {
      "type": "object",
      "properties": {
        "tagFQN" : {
          "type" : "string",
          "maxLength": 45
        },
        "labelType" : {
          "type" : "string",
          "enum": [
            "MANUAL",
            "PROPAGATED",
            "AUTOMATED",
            "DERIVED"
          ],
          "default": "MANUAL"
        },
        "state" : {
          "type" : "string",
          "enum": [
            "SUGGESTED",
            "CONFIRMED"
          ],
          "default": "CONFIRMED"
        },
        "href": {
          "description": "Link to the tag resource",
          "$ref": "#/definitions/href"
        }
      }
    }
  }
}
